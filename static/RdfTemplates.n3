@prefix : <https://rdf.lodgeit.net.au/rdf.lodgeit.net.au.v1.n3#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.

:this rdfs:comment """
unfinished work on introducing namespacing. This should help with ordering the output of rdf_cleanup2.py and similar reasonably, and in keeping identifiers short

excel: generic excel schema-directed ui stuff
calcs: the schemas
hp: hirepurchase



excel:is_multi rdfs:comment "are multiple instances allowed in one workbook?"

calcs:hp_calculator_sheets
	excel:is_multi true;
	excel:sheets (
		[
			excel:name_prefix "HP";
			excel:root hp:hp_calculator_query;
			hp:example_doc
			[
				hp:begin_date [rdf:value "2019-10-10T00:00:00.0"^^xsd:dateTime];
				hp::hp_contract [
					a hp:hp_contract;
					hp::contract_number [rdf:value "xxxx"];
					hp:currency [ rdf:value "AUD"];
					hp:cash_price [ rdf:value "321321.27"];
					hp:interest_rate [ rdf:value "5"];
					hp:number_of_installments [ rdf:value 30];
					hp:hp_contract_has_payment_type [ rdf:value hp:hp_contract_payment_type_advance];
					hp:hp_installments [rdf:value rdf:nil]
				]
			]
		]
	).
	
calcs:hp_calculator_query
	excel:position [excel:col "A"; excel:row "1"];
	excel:title "Standalone Calculator Query Parameters";
	excel:cardinality excel:single;
	excel:class hp:hp_calculator_query;
	excel:fields (
		[	excel:property hp:begin_date; 
			excel:type xsd:dateTime; 
			excel:comment "ignored for Investment Calculator"]
		[	excel:property hp:end_date; 
			excel:type xsd:dateTime; 
			excel:comment "ignored for Investment Calculator"]
		[
			excel:property hp:hp_contract; 
			excel:template calcs:hp_contract]
	).


:hp_contract
	#rdf:type :section;
	:position [:col "A"; :row "5"];
	:title "Hirepurchase Contract";
	:cardinality :single;	
	:class :hp_contract;
	:fields (
		[:property :contract_number]
		[:property :currency]
		[:property :cash_price; :type xsd:decimal]
		[:property :interest_rate; :type xsd:decimal]
		[:property :interest_period; :note "dunno what type here"]
		[:property :repayment_period; :note "dunno what type here"]
		[:property :number_of_installments; :type xsd:integer]
		[:property :repayment_amount; :type xsd:decimal]
		[:property :total_payments; :type xsd:integer]
		[:property :total_interest; :type xsd:decimal]
		[:property :repayment_balance; :type xsd:decimal]
		[:property :hp_contract_has_payment_type; :type :uri]
		[:property :hp_installments; :template :hp_installments]
	).

:hp_contract_has_payment_type rdfs:range :hp_contract_payment_type.

:hp_contract_payment_type_advance 
	a :hp_contract_payment_type;
	rdfs:label "advance".

:hp_installments
	#a :section;
	:position [:col "E"; :row "20"];
	:title "Installments";
	:cardinality :multi;
	:class :hp_installment;
	:fields (
		[:property :installment_number; :type xsd:integer]
		[:property :opening_date; :type xsd:dateTime;]
		[:property :opening_balance; :type xsd:decimal]
		[:property :interest_amount; :type xsd:decimal]
		[:property :installment_amount; :type xsd:decimal]
		[:property :closing_date; :type xsd:dateTime;]
		[:property :closing_balance; :type xsd:decimal]
		[:property :total_repayments_through_period; :type xsd:decimal]
		[:property :total_interest_payments_through_period; :type xsd:decimal]
	).






:depreciation_calculator_sheets
	:is_multi false;
	:sheets 
	(
		[
			:name_prefix "depreciation_queries";
			:root :depreciation_queries;
			:example_doc :depreciation_example_queries
		]
		[
			:name_prefix "depreciation_events";
			:root :depreciation_events;
			:example_doc :depreciation_example_events
		]
		[
			:name_prefix "depreciation_assets";
			:root :depreciation_assets;
			:example_doc :depreciation_example_assets
		]
	).

:depreciation_example_queries rdf:value (
	[ a :depreciation_query ;
		:depreciation_query_has_type [ a rdf:value ;
				rdf:value :depreciation_pool_from_start ] ;
		:depreciation_query_method [ a rdf:value ;
				rdf:value "diminishing_value"^^xsd:string ] ;
		:depreciation_query_pool [ a rdf:value ;
				rdf:value "general_pool"^^xsd:string ] ;
		:depreciation_query_to_date [ a rdf:value ;
				rdf:value "2019-02-02T00:00:00"^^xsd:dateTime ] ] 
	[ a :depreciation_query ;
		:depreciation_query_asset_id [ a rdf:value ;
				rdf:value "car456"^^xsd:string ] ;
		:depreciation_query_from_date [ a rdf:value ;
				rdf:value "2017-06-01T00:00:00"^^xsd:dateTime ] ;
		:depreciation_query_has_type [ a rdf:value ;
				rdf:value :depreciation_between_two_dates ] ;
		:depreciation_query_method [ a rdf:value ;
				rdf:value "diminishing_value"^^xsd:string ] ;
		:depreciation_query_to_date [ a rdf:value ;
				rdf:value "2019-02-02T00:00:00"^^xsd:dateTime ] ]
	[ a :depreciation_query ;
		:depreciation_query_asset_id [ a rdf:value ;
				rdf:value "car123"^^xsd:string ] ;
		:depreciation_query_has_type [ a rdf:value ;
				rdf:value :written_down_value ] ;
		:depreciation_query_method [ a rdf:value ;
				rdf:value "diminishing_value"^^xsd:string ] ;
		:depreciation_query_written_down_date [ a rdf:value ;
				rdf:value "2017-06-01T00:00:00"^^xsd:dateTime ] ]
	[ a :depreciation_query ;
		:depreciation_query_asset_id [ a rdf:value ;
				rdf:value "car123"^^xsd:string ] ;
		:depreciation_query_has_type [ a rdf:value ;
				rdf:value :profit_and_loss ] ;
		:depreciation_query_method [ a rdf:value ;
				rdf:value "diminishing_value"^^xsd:string ] ;
		:depreciation_query_termination_date [ a rdf:value ;
				rdf:value "2019-07-07T00:00:00"^^xsd:dateTime ] ;
		:depreciation_query_termination_value [ a rdf:value ;
				rdf:value 500 ] ]
).
									

:depreciation_example_events rdf:value (
	[ a :depreciation_event ;
	:depreciation_event_asset [ a rdf:value ;
			rdf:value "car123"^^xsd:string ] ;
	:depreciation_event_date [ a rdf:value ;
			rdf:value "2017-06-01T00:00:00"^^xsd:dateTime ] ;
	:depreciation_event_has_type [ a rdf:value ;
			rdf:value :transfer_asset_to_pool ] ;
	:depreciation_event_pool [ a rdf:value ;
			rdf:value "general_pool"^^xsd:string ] ]
	[ a :depreciation_event ;
	:depreciation_event_asset [ a rdf:value ;
			rdf:value "car456"^^xsd:string ] ;
	:depreciation_event_date [ a rdf:value ;
			rdf:value "2017-08-01T00:00:00"^^xsd:dateTime ] ;
	:depreciation_event_has_type [ a rdf:value ;
			rdf:value :transfer_asset_to_pool ] ;
	:depreciation_event_pool [ a rdf:value ;
			rdf:value "general_pool"^^xsd:string ] ]
	[ a :depreciation_event ;
	:depreciation_event_asset [ a rdf:value ;
			rdf:value "car123"^^xsd:string ] ;
	:depreciation_event_date [ a rdf:value ;
			rdf:value "2021-06-01T00:00:00"^^xsd:dateTime ] ;
	:depreciation_event_has_type [ a rdf:value ;
			rdf:value :asset_disposal ] ]
	[ a :depreciation_event ;
	:depreciation_event_asset [ a rdf:value ;
			rdf:value "car456"^^xsd:string ] ;
	:depreciation_event_date [ a rdf:value ;
			rdf:value "2020-07-31T00:00:00"^^xsd:dateTime ] ;
	:depreciation_event_has_type [ a rdf:value ;
			rdf:value :asset_disposal ] ]
).

:depreciation_example_assets rdf:value (
	[ a :depreciation_asset ;
	:cost [ a rdf:value ;
			rdf:value 1000 ] ;
	:effective_life_years [ a rdf:value ;
			rdf:value 5 ] ;
	:id [ a rdf:value ;
			rdf:value "car123"^^xsd:string ] ;
	:start_date [ a rdf:value ;
			rdf:value "2017-05-01T00:00:00"^^xsd:dateTime ] ]
	[ a :depreciation_asset ;
	:cost [ a rdf:value ;
			rdf:value 2000 ] ;
	:effective_life_years [ a rdf:value ;
			rdf:value 8 ] ;
	:id [ a rdf:value ;
			rdf:value "car456"^^xsd:string ] ;
	:start_date [ a rdf:value ;
			rdf:value "2015-03-16T00:00:00"^^xsd:dateTime ] ]
).
									

:depreciation_query_has_type rdfs:range :depreciation_query_type.

:depreciation_pool_from_start 
	a :depreciation_query_type.
:depreciation_between_two_dates 
	a :depreciation_query_type.
:written_down_value 
	a :depreciation_query_type.
:profit_and_loss 
	a :depreciation_query_type.


:depreciation_event_has_type rdfs:range :depreciation_event_type.

:transfer_asset_to_pool 
	a :depreciation_event_type.
:asset_disposal 
	a :depreciation_event_type.



:depreciation_queries
	:title "depreciation_queries";	
	:position [:col "A"; :row "1"];
	:cardinality :multi;
	:class :depreciation_query;
	:fields (
		[:property :depreciation_query_has_type; :type :uri]
		[:property :depreciation_query_asset_id]
		[:property :depreciation_query_pool]
		[:property :depreciation_query_from_date; :type xsd:dateTime]
		[:property :depreciation_query_to_date; :type xsd:dateTime]
		[:property :depreciation_query_written_down_date; :type xsd:dateTime]
		[:property :depreciation_query_method]
		[:property :depreciation_query_termination_value; :type xsd:decimal]
		[:property :depreciation_query_termination_date; :type xsd:dateTime]
		[:property :depreciation_query_total_depreciation; :type xsd:decimal]
		[:property :depreciation_query_depreciation_value; :type xsd:decimal]
		[:property :depreciation_query_written_down_value; :type xsd:decimal]
		[:property :depreciation_query_profit_and_loss; :type xsd:decimal]
	).
	
	
	
:depreciation_events
	:title "depreciation_events";
	:position [:col "A"; :row "1"];
	:cardinality :multi;
	:class :depreciation_event;
	:fields (
		[:property :depreciation_event_has_type; :type :uri]
		[:property :depreciation_event_asset]
		[:property :depreciation_event_pool]
		[:property :depreciation_event_date; :type xsd:dateTime]
	).


:depreciation_assets
	:title "depreciation_assets";
	:position [:col "A"; :row "1"];
	:cardinality :multi;	
	:class :depreciation_asset;
	:fields (
		[:property :id]
		[:property :start_date; :type xsd:dateTime]
		[:property :cost; :type xsd:decimal]
		[:property :effective_life_years; :type xsd:integer]
	).


:gl_sheet
	# are multiple instances allowed in one workbook?
	:is_multi false;
	:sheets (
		[
			:name_prefix "GL_input";
			:root :gl;
			:example_doc
				[	:default_currency [rdf:value "AUD"];
					:items [rdf:value (
						[
							:date [rdf:value "2019-10-10T00:00:00.000000"^^xsd:dateTime];
							:account [rdf:value "Assets"];
							:debit [rdf:value "USD 500"]
						]
						[
							:date [rdf:value "2019-10-10T00:00:00.000000"^^xsd:dateTime];
							:account [rdf:value "Revenue"];
							:credit [rdf:value "600"]
						]
						[
							:date [rdf:value "2019-10-10T00:00:00.000000"^^xsd:dateTime];
							:account [rdf:value "CurrencyMovement"];
							:debit [rdf:value "600 AUD"];
							:credit [rdf:value "500 USD"]
						]
					)]
				]
		]
	).
	
:gl
	:position [:col "A"; :row "1"];
	:title "GL input";
	:cardinality :single;
	:class :gl;
	:fields (
		[:property :default_currency; :type xsd:string]
		[:property :items; :template :gl_entries_template]
	).

:gl_entries_template
	:position [:col "A"; :row "4"];
	:title "entries";
	:cardinality :multi;
	:class :gl_entry;
	:fields (
		[:property :date; :type xsd:dateTime]
		[:property :account; :type xsd:string]
		[:property :description; :type xsd:string]
		[:property :debit; :type xsd:string]
		[:property :credit; :type xsd:string]
	).
